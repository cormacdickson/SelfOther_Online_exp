<!DOCTYPE html>
<html>
  <head>
  	<meta charset="UTF-8">
    <title>My experiment</title>

    <script src="jspsych-6.3.0/jspsych.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-fullscreen.js"></script>
    <script src="dist/jspsych-survey-text.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-call-function.js"></script>
    <script src="jspsych-6.3.0/plugins/jspsych-instructions.js"></script>
    <link href="jspsych-6.3.0/css/jspsych.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@0.1.1/css/survey.css">
  	</head>

  	<body>

  	</body>
  	<script>

    /* create timeline */
    var timeline = [];

/*
	  var progress = jsPsych.progress();

	  var preload_trial = {
    type: 'preload',
    auto_preload: true

}

timeline.push(preload_trial)
*/

	timeline.push({
         type: 'fullscreen',
         fullscreen_mode: true
       });





// Instructions #1
       var instructions = {
           type: 'instructions',
           pages: function() {return [
               '<h1>Welcome!</h1>'

           ]},
           show_clickable_nav: true,
           button_label_previous: '',
           button_label_next: ''
       }

timeline.push(instructions)




// prompt for
var trial = {
  type: 'jspsych-survey-text',
  preamble: '<p>What are your intials?</p>',
  html: '<p><input type="text" id="test-resp-box" name="response" size="10" /></p>',
  autofocus: 'test-resp-box'
};

timeline.push(trial)


//Instructions 2



/*
	var feedback = {
         type: 'html-keyboard-response',
         stimulus: function(){
           var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
           if(last_trial_correct){
             return "<div style=\"width:150px;height:56px;font-size:30px;text-align:center;\">Correct!</div>";
           } else {
             return "<div style=\"width:150px;height:56px;border:0px;font-size:30px;text-align:center\">Wrong.</div>"
           }
         },
         trial_duration: function(){
           var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
           if(last_trial_correct){
             return 1000;
           } else {
             return 1500
           }
         },
         response_ends_trial: false
       }



   var practice_block = {
        timeline: [buffer, discrimination_block, response_block, feedback],
        timeline_variables: practice_sequence,
        repetitions: 1,
        randomize_order: false
      }


timeline.push(practice_block);

timeline.push(debrief_block);

*/


// select all trials
var all_data = jsPsych.data.get();

// get csv representation of data and log to console
console.log(all_data.csv());


/* start the experiment */
//jatos.onLoad(function() {
jsPsych.init({
	//preload_images: ['img/1.png','img/2.png','img/3.png','img/_practice_a.png','img/practice_b.png'],
      timeline: timeline,
/*
      on_finish: function() {
        //jsPsych.data.displayData('csv');
        var resultJson = jsPsych.data.get().csv();
      jatos.submitResultData(resultJson, jatos.endStudy);
      }
      */
    });

  </script>
</html>
